<div class="form-container" [formGroup]="personForm">
  <h2>Person Details</h2>

<mat-form-field>
  <input matInput formControlName="firstname" placeholder="First Name">
</mat-form-field>

<mat-form-field>
  <input matInput formControlName="lastname" placeholder="Last Name">
</mat-form-field>

<mat-form-field>
  <input matInput formControlName="email" placeholder="Email">
</mat-form-field>

<mat-form-field appearance="fill">
  <mat-label>Education</mat-label>
  <input matInput formControlName="education" placeholder="Enter education">
</mat-form-field>

<mat-form-field appearance="fill">
  <input matInput formControlName="password" type="password" placeholder="Enter password" required>
</mat-form-field>

<mat-form-field appearance="fill">
  <mat-label>Status</mat-label>
  <mat-select formControlName="status" required>
    <mat-option value="active">Active</mat-option>
    <mat-option value="inactive">Inactive</mat-option>
  </mat-select>
</mat-form-field>

<mat-form-field appearance="fill">
  <mat-label>Created At</mat-label>
  <input matInput [matDatepicker]="picker" formControlName="created_at" required>
  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
  <mat-datepicker #picker></mat-datepicker>
</mat-form-field>


  <!-- CONTACTS -->
  <div class="section-title">Contacts</div>
  <div class="section-container" formArrayName="contacts">
    <div *ngFor="let contact of contacts.controls; let i = index" [formGroupName]="i" class="row">
      <mat-form-field appearance="fill">
        <mat-label>Type</mat-label>
        <input matInput formControlName="type" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Value</mat-label>
        <input matInput formControlName="value" />
      </mat-form-field>
    </div>
    <button mat-stroked-button color="primary" class="add-button" (click)="addContact()">+ Add Contact</button>
  </div>

  <!-- ADDRESSES -->
  <div class="section-title">Addresses</div>
  <div class="section-container" formArrayName="addresses">
    <div *ngFor="let address of addresses.controls; let i = index" [formGroupName]="i" class="row">
      <mat-form-field appearance="fill">
        <mat-label>City</mat-label>
        <input matInput formControlName="city" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>State</mat-label>
        <input matInput formControlName="state" />
      </mat-form-field>
    </div>
    <button mat-stroked-button color="primary" class="add-button" (click)="addAddress()">+ Add Address</button>
  </div>

  <!-- PROFILES -->
  <div class="section-title">Profiles</div>
  <div class="section-container" formArrayName="profiles">
    <div *ngFor="let profile of profiles.controls; let pi = index" [formGroupName]="pi">
      <mat-form-field appearance="fill">
        <mat-label>Profile Type</mat-label>
        <input matInput formControlName="profileType" />
      </mat-form-field>

      <!-- DOCUMENTS -->
      <div class="sub-section-title">Documents</div>
      <div formArrayName="documents">
        <div *ngFor="let doc of getDocuments(pi).controls; let di = index" [formGroupName]="di" class="row">
          <mat-form-field appearance="fill">
            <mat-label>Document Name</mat-label>
            <input matInput formControlName="name" />
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>URL</mat-label>
            <input matInput formControlName="url" />
          </mat-form-field>
        </div>
        <button mat-stroked-button color="primary" class="add-button" (click)="addDocument(pi)">+ Add Document</button>
      </div>

      <!-- COMPETITIONS -->
      <div class="sub-section-title">Competitions</div>
      <div formArrayName="competitions">
        <div *ngFor="let comp of getCompetitions(pi).controls; let ci = index" [formGroupName]="ci" class="row">
          <mat-form-field appearance="fill">
            <mat-label>Competition Name</mat-label>
            <input matInput formControlName="name" />
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Level</mat-label>
            <input matInput formControlName="level" />
          </mat-form-field>
        </div>
        <button mat-stroked-button color="primary" class="add-button" (click)="addCompetition(pi)">+ Add Competition</button>
      </div>
    </div>
    <button mat-raised-button color="primary" class="add-button" (click)="addProfile()">+ Add Profile</button>
  </div>

  <!-- SUBMIT BUTTON -->
<button mat-raised-button color="primary" (click)="onSubmit()">Submit</button>
</div>
